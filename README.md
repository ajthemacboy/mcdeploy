# mcdeploy
A method to deploy multiple Minecraft servers using your own server files


# Usage

1. Install Docker and docker-compose

2. Clone this repository

3. Create `/dock` with `mkdir /dock` - this is where server files will be stored for easy access

4. Edit the `path` variable in `deploy.sh` and `down.sh` to the mcdeploy directory

5. Copy your server files and a `start.sh` script to start the server into the `serverfiles` directory. Be sure to include your eula.txt, world saves, or any other files needed.

6. Run `./deploy.sh` and enter a port range. To start 10 servers listening on ports 25585 through 25595, enter `25585..25595`. 

7. To stop all containers created with the script per directory, run `down.sh` in that directory.

**Warning: Server data is deleted by `down.sh` by default. To avoid this behavior, comment out the `while...done` loop and optionally the `docker rm` lines in `down.sh`.

Server data is deleted by default because this script is intended for environments like minigame servers, where you typically don't want to keep maps and other server data after a game is over.

If you wanted to later start 10 more servers on different ports, simply copy the `mcdeploy` directory to another directory and execute `deploy.sh` from there. If it is in a different directory, running `down.sh` won't stop servers created in other directories.


# Technical information

- Each server will be given its own unique UUID when you run `deploy.sh`. These UUIDs are stored in `uuidlist.txt` until the containers are removed with `down.sh`, when each UUID is removed as each container is removed.

- Server data volumes are located /dock subfolders with their own UUID.

- docker-compose variables are read from the .env file generated by `deploy.sh`.
